<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1"
    />
    <link
    type="text/css"
    rel="stylesheet"
    href="./public/css/style.css"
  /> 
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link href="https://fonts.googleapis.com/css2?family=DotGothic16&display=swap" rel="stylesheet">  
   <title>弹幕墙</title>
    <script>
      function post() {
        const form = document.getElementById('form');
        const formData = new FormData(form);
        const content = { content: formData.get('content') };

        fetch('https://danmakuwall.herokuapp.com', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            Accept: 'application/json',
          },
          body: JSON.stringify(content),
        }).then((res) => {
          if (res.status === 500) window.alert('发射失败');
          else {
            window.alert('发射成功');
            window.location.reload();
          }
        });
      }
    </script>
  </head>
  <body>
    <div id='app' class="app">
    <div id="container" class="container"></div>
    <form method="POST" id='form' onsubmit="post(); return false" >
        <label for='content'></label>
        <input type="text" name="content"  placeholder="say whatever you want ..." required />
        <button type="submit" value="发射">
          <i class="fa fa-send"></i>
        </button>
    </form>
    </div>
    <script type="module" src="./public/js/index.js"></script>
    <script 
  color="255,255,255" 
  zIndex="-2" 
  count="150" 
  src="./public/js/canvas-nest.js">
</script>
 </body>
</html>